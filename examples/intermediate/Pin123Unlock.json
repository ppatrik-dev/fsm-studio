{
    "automate_comment": "A Moore machine that recognizes the access PIN code '123'",
    "automate_name": "Pin123Unlock",
    "inputs": [
        "var input = '123';"
    ],
    "outputs": [
        "var output = '';"
    ],
    "start_state": "S0",
    "states": {
        "S0": {
            "action": "output = 'LOCKED';",
            "transitions": [
                {
                    "condition": "input == '1';",
                    "to": "S1"
                },
                {
                    "condition": "true;",
                    "to": "S0"
                }
            ]
        },
        "S1": {
            "action": "output = 'LOCKED';",
            "transitions": [
                {
                    "condition": "input == '2';",
                    "to": "S2"
                },
                {
                    "condition": "input == '1';",
                    "to": "S1"
                },
                {
                    "condition": "true;",
                    "to": "S0"
                }
            ]
        },
        "S2": {
            "action": "output = 'LOCKED';",
            "transitions": [
                {
                    "condition": "input == '3';",
                    "to": "UNLOCKED"
                },
                {
                    "condition": "input == '1';",
                    "to": "S1"
                },
                {
                    "condition": "true;",
                    "to": "S0"
                }
            ]
        },
        "UNLOCKED": {
            "action": "repeat += 1; if (repeat > 1){output = 'LOCKED';} else {output = 'UNLOCKED';};",
            "transitions": [
                {
                    "condition": "true;",
                    "to": "UNLOCKED"
                }
            ]
        }
    },
    "variables": [
        "var repeat = 0;"
    ]
}
